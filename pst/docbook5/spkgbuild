# description   : The DocBook XML DTD and Schemas-5
# depends       : libarchive libxml2

name=docbook-xml
version=5.0    
release=1
source=""

options="!checksum"

build() {
    cd $name-$version
    
    install -vdm755 /usr/share/xml/docbook/schema/{dtd,rng,sch,xsd}/$version 
    install -vm644  dtd/* /usr/share/xml/docbook/schema/dtd/$version         
    install -vm644  rng/* /usr/share/xml/docbook/schema/rng/$version         
    install -vm644  sch/* /usr/share/xml/docbook/schema/sch/$version         
    install -vm644  xsd/* /usr/share/xml/docbook/schema/xsd/$version
    xmlcatalog --noout --create /usr/share/xml/docbook/schema/dtd/$version/catalog.xml 
    xmlcatalog --noout --add "public"     \
    "-//OASIS//DTD DocBook XML $version//EN" \
    "docbook.dtd" /usr/share/xml/docbook/schema/dtd/$version/catalog.xml 
    xmlcatalog --noout --add "system"                             \
    "http://www.oasis-open.org/docbook/xml/$version/dtd/docbook.dtd" \
    "docbook.dtd" /usr/share/xml/docbook/schema/dtd/$version/catalog.xml 
    xmlcatalog --noout --create /usr/share/xml/docbook/schema/rng/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                 \
    "http://docbook.org/xml/$version/rng/docbook.rng" \
    "docbook.rng" /usr/share/xml/docbook/schema/rng/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                                \
    "http://www.oasis-open.org/docbook/xml/$version/rng/docbook.rng" \
    "docbook.rng" /usr/share/xml/docbook/schema/rng/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                   \
    "http://docbook.org/xml/$version/rng/docbookxi.rng" \
    "docbookxi.rng" /usr/share/xml/docbook/schema/rng/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                                  \
    "http://www.oasis-open.org/docbook/xml/$version/rng/docbookxi.rng" \
    "docbookxi.rng" /usr/share/xml/docbook/schema/rng/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                 \
    "http://docbook.org/xml/$version/rng/docbook.rnc" \
    "docbook.rnc" /usr/share/xml/docbook/schema/rng/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                                \
    "http://www.oasis-open.org/docbook/xml/$version/rng/docbook.rnc" \
    "docbook.rnc" /usr/share/xml/docbook/schema/rng/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                   \
    "http://docbook.org/xml/$version/rng/docbookxi.rnc" \
    "docbookxi.rnc" /usr/share/xml/docbook/schema/rng/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                                  \
    "http://www.oasis-open.org/docbook/xml/$version/rng/docbookxi.rnc" \
    "docbookxi.rnc" /usr/share/xml/docbook/schema/rng/$version/catalog.xml 
    xmlcatalog --noout --create /usr/share/xml/docbook/schema/sch/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                 \
    "http://docbook.org/xml/$version/sch/docbook.sch" \
    "docbook.sch" /usr/share/xml/docbook/schema/sch/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                                \
    "http://www.oasis-open.org/docbook/xml/$version/sch/docbook.sch" \
    "docbook.sch" /usr/share/xml/docbook/schema/sch/$version/catalog.xml 
    xmlcatalog --noout --create /usr/share/xml/docbook/schema/xsd/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                 \
    "http://docbook.org/xml/$version/xsd/docbook.xsd" \
    "docbook.xsd" /usr/share/xml/docbook/schema/xsd/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                                \
    "http://www.oasis-open.org/docbook/xml/$version/xsd/docbook.xsd" \
    "docbook.xsd" /usr/share/xml/docbook/schema/xsd/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                   \
    "http://docbook.org/xml/$version/xsd/docbookxi.xsd" \
    "docbookxi.xsd" /usr/share/xml/docbook/schema/xsd/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                                  \
    "http://www.oasis-open.org/docbook/xml/$version/xsd/docbookxi.xsd" \
    "docbookxi.xsd" /usr/share/xml/docbook/schema/xsd/$version/catalog.xml 
    xmlcatalog --noout --add "uri"               \
    "http://docbook.org/xml/$version/xsd/xlink.xsd" \
    "xlink.xsd" /usr/share/xml/docbook/schema/xsd/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                               \
    "http://www.oasis-open.org/docbook/xml/$version/xsd/xlink.xsd" \
    "xlink.xsd" /usr/share/xml/docbook/schema/xsd/$version/catalog.xml 
    xmlcatalog --noout --add "uri"              \
    "http://docbook.org/xml/$version/xsd/xml.xsd" \
    "xml.xsd" /usr/share/xml/docbook/schema/xsd/$version/catalog.xml 
    xmlcatalog --noout --add "uri"                             \
    "http://www.oasis-open.org/docbook/xml/$version/xsd/xml.xsd" \
    "xml.xsd" /usr/share/xml/docbook/schema/xsd/$version/catalog.xml
    if [ ! -e /etc/xml/catalog ]; then
    install -v -d -m755 /etc/xml 
    xmlcatalog --noout --create /etc/xml/catalog
    fi 
    xmlcatalog --noout --add "delegatePublic"                    \
    "-//OASIS//DTD DocBook XML $version//EN                       " \
    "file:///usr/share/xml/docbook/schema/dtd/$version/catalog.xml" \
    /etc/xml/catalog 
    xmlcatalog --noout --add "delegateSystem"                    \
    "http://docbook.org/xml/$version/dtd/"                          \
    "file:///usr/share/xml/docbook/schema/dtd/$version/catalog.xml" \
    /etc/xml/catalog 
    xmlcatalog --noout --add "delegateURI"                       \
    "http://docbook.org/xml/$version/dtd/"                          \
    "file:///usr/share/xml/docbook/schema/dtd/$version/catalog.xml" \
    /etc/xml/catalog 
    xmlcatalog --noout --add "delegateURI"                       \
    "http://docbook.org/xml/$version/rng/"                          \
    "file:///usr/share/xml/docbook/schema/rng/$version/catalog.xml" \
    /etc/xml/catalog 
    xmlcatalog --noout --add "delegateURI"                       \
    "http://docbook.org/xml/$version/sch/"                          \
    "file:///usr/share/xml/docbook/schema/sch/$version/catalog.xml" \
    /etc/xml/catalog 
    xmlcatalog --noout --add "delegateURI"                       \
    "http://docbook.org/xml/$version/xsd/"                          \
    "file:///usr/share/xml/docbook/schema/xsd/$version/catalog.xml" \
    /etc/xml/catalog
}
