# description   : SANE is short for Scanner Access Now Easy
# depends       : 

name=sane
version=1.4.0    
release=1
source="https://anduin.linuxfromscratch.org/BLFS/sane/sane-backends-$version.tar.gz"

options="!checksum"

build() {
    cd $name-$version
    
    sg scanner -c "                                 \
    PYTHON=python3 ./configure --prefix=/usr        \
    --sysconfdir=/etc    \
    --localstatedir=/var \
    --with-lockdir=/run/lock \
    --docdir=/usr/share/doc/sane-backends-$version" 
    make
    groupadd -g 70 scanner
    usermod -G scanner -a
    <em class="replaceable"><code>username</code></em>
    make DESTDIR=$PKG install                                         
    install -m 644 -v tools/udev/libsane.rules           \
    /etc/udev/rules.d/65-scanner.rules 
    mkdir -p          /run/lock/sane 
    chgrp -v scanner  /run/lock/sane
cat >> /etc/sane.d/net.conf << "EOF"
    connect_timeout = 60
    <server_ip>
EOF
}
