# description   : The GNOME Online Accounts package contains a framework used to access the user's online accounts
# depends       : gcr jsonglib libadwaita rest vala glib

name=gnome-online-accounts
version=3.54.5    
release=1
source="https://download.gnome.org/sources/gnome-online-accounts/3.54/gnome-online-accounts-$version.tar.xz"

options="!checksum"

build() {
    cd $name-$version
    
    mkdir build 
    cd    build 
    meson setup                                            \
    --prefix=/usr                                    \
    --buildtype=release                              \
    -D documentation=false                           \
    -D kerberos=false                                \
    -D google_client_secret=5ntt6GbbkjnTVXx-MSxbmx5e \
    -D google_client_id=595013732528-llk8trb03f0ldpqq6nprjp1s79596646.apps.googleusercontent.com \
    .. 
    ninja
    meson configure -D documentation=true 
    sed "s/project_name()/ + '-' + meson.project_version()/" \
    -i ../doc/meson.build 
    ninja
    DESTDIR=$PKG ninja install
}
