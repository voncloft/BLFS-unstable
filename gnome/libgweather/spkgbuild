# description   : The libgweather package is a library used to access weather information from online services for numerous locations
# depends       : geocodeglib gtk libsoup pygobject glib libxml2 vala

name=libgweather
version=4.4.4    
release=1
source="https://download.gnome.org/sources/libgweather/4.4/libgweather-$version.tar.xz
https://www.linuxfromscratch.org/patches/blfs/svn/libgweather-$version-upstream_fix-1.patch"

options="!checksum"

build() {
    cd $name-$version
    
    patch -Np1 -i ../libgweather-$version-upstream_fix-1.patch
    mkdir build 
    cd    build 
    meson setup --prefix=/usr       \
    --buildtype=release \
    -D gtk_doc=false    \
    ..                  
    ninja
    sed "s/libgweather_full_version/'libgweather-$version'/" \
    -i ../doc/meson.build                             
    meson configure -D gtk_doc=true                       
    ninja
    DESTDIR=$PKG ninja install
}
