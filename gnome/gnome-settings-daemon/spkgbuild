# description   : The GNOME Settings Daemon is responsible for setting various parameters of a GNOME Session and the applications that run under it
# depends       : alsalib fontconfig gcr geoclue geocodeglib gnomedesktop libcanberra libgweather libnotify libwacom pulseaudio upower colord cups networkmanager modemmanager nss wayland blocaled

name=gnome-settings-daemon
version=48.1    
release=1
source="https://download.gnome.org/sources/gnome-settings-daemon/48/gnome-settings-daemon-$version.tar.xz"

options="!checksum"

build() {
    cd $name-$version
    
    sed -e 's/libsystemd/libelogind/' \
    -i plugins/power/test.py
    sed -e 's/(backlight->logind_proxy)/(0)/' \
    -i plugins/power/gsd-backlight.c
    mkdir build 
    cd    build 
    meson setup --prefix=/usr       \
    --buildtype=release \
    -D systemd=false    \
    ..                  
    ninja
    DESTDIR=$PKG ninja install
}
