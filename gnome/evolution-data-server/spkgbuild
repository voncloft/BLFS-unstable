# description   : The Evolution Data Server package provides a unified backend for programs that work with contacts, tasks, and calendar information
# depends       : libical libsecret nss sqlite gnomeonlineaccounts glib gtk gtk icu libcanberra libgweather vala webkitgtk blocaled

name=evolution-data-server
version=3.56.2    
release=1
source="https://download.gnome.org/sources/evolution-data-server/3.56/evolution-data-server-$version.tar.xz
https://anduin.linuxfromscratch.org/BLFS/bdb/db-5.3.28.tar.gz
https://anduin.linuxfromscratch.org/BLFS/bdb/db-5.3.28.tar.gz"

options="!checksum"

build() {
    cd $name-$version
    
    mkdir build 
    cd    build 
    cmake -D CMAKE_INSTALL_PREFIX=/usr  \
    -D SYSCONF_INSTALL_DIR=/etc   \
    -D ENABLE_VALA_BINDINGS=ON    \
    -D ENABLE_INSTALLED_TESTS=ON  \
    -D WITH_OPENLDAP=OFF          \
    -D WITH_KRB5=OFF              \
    -D ENABLE_INTROSPECTION=ON    \
    -D ENABLE_GTK_DOC=OFF         \
    -D WITH_LIBDB=OFF             \
    -D WITH_SYSTEMDUSERUNITDIR=no \
    -W no-dev -G Ninja ..         
    ninja
    DESTDIR=$PKG ninja install
}
