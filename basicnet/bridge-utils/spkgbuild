# description   : The bridge-utils package contains a utility needed to create and manage bridge devices
# depends       : 

name=bridge-utils
version=1.7.1    
release=1
source="https://www.kernel.org/pub/linux/utils/net/bridge-utils/bridge-utils-$version.tar.xz"

options="!checksum"

build() {
    cd $name-$version
    
    autoconf                  
    ./configure --prefix=/usr 
    make
    make DESTDIR=$PKG install
    make DESTDIR=$PKG install-service-bridge
cat > $PKG/etc/sysconfig/ifconfig.br0 << "EOF"
    ONBOOT=yes
    IFACE=br0
    VIRTINT=yes
    SERVICE="bridge ipv4-static"  # Space separated
    IP=192.168.1.32
    GATEWAY=192.168.1.1
    PREFIX=24
    BROADCAST=192.168.1.255
    CHECK_LINK=no                 # Don't check before bridge is created
    STP=no                        # Spanning tree protocol, default no
    INTERFACE_COMPONENTS="eth0"   # Add to IFACE, space separated devices
    IP_FORWARD=true
EOF
}
