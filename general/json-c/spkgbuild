# description   : The JSON-C implements a reference counting object model that allows you to easily construct JSON objects in C, output them as JSON formatted strings and parse JSON formatted strings back into the C representation of JSON objects
# depends       : cmake

name=json-c
version=0.18    
release=1
source="https://s3.amazonaws.com/json-c_releases/releases/json-c-$version.tar.gz"

options="!checksum"

build() {
    cd $name-$version
    
    sed -i 's/VERSION 2.8/VERSION 4.0/' apps/CMakeLists.txt  
    sed -i 's/VERSION 3.9/VERSION 4.0/' tests/CMakeLists.txt
    mkdir build 
    cd    build 
    cmake -D CMAKE_INSTALL_PREFIX=/usr \
    -D CMAKE_BUILD_TYPE=Release  \
    -D BUILD_STATIC_LIBS=OFF     \
    .. 
    make
    doxygen doc/Doxyfile
    make DESTDIR=$PKG install
    install -d -vm755 /usr/share/doc/json-c-$version 
    install -v -m644 doc/html/* /usr/share/doc/json-c-$version
}
