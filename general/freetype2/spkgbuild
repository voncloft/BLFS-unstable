# description   : The FreeType2 package contains a library which allows applications to properly render TrueType fonts
# depends       : harfbuzz libpng whichalternatives

name=freetype
version=2.13.3    
release=1
source="https://downloads.sourceforge.net/freetype/freetype-$version.tar.xz
https://downloads.sourceforge.net/freetype/freetype-doc-$version.tar.xz"

options="!checksum"

build() {
    cd $name-$version
    
    tar -xf ../freetype-doc-$version.tar.xz --strip-components=2 -C docs
    sed -ri "s:.*(AUX_MODULES.*valid):\1:" modules.cfg 
    sed -r "s:.*(#.*SUBPIXEL_RENDERING) .*:\1:" \
    -i include/freetype/config/ftoption.h  
    ./configure --prefix=/usr --enable-freetype-config --disable-static 
    make
    make DESTDIR=$PKG install
    cp -v -R docs -T /usr/share/doc/freetype-$version 
    rm -v /usr/share/doc/freetype-$version/freetype-config.1
}
