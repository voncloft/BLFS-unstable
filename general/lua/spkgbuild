# description   : Lua is a powerful light-weight programming language designed for extending applications
# depends       : 

name=lua
version=5.4.8    
release=1
source="https://www.lua.org/ftp/lua-$version.tar.gz
https://www.linuxfromscratch.org/patches/blfs/svn/lua-$version-shared_library-1.patch
https://www.lua.org/tests/lua-$version-tests.tar.gz"

options="!checksum"

build() {
    cd $name-$version
    
cat > $PKGlua.pc << "EOF"
EOF
    patch -Np1 -i ../lua-$version-shared_library-1.patch 
    make DESTDIR=$PKG linux
    make DESTDIR=$PKG INSTALL_TOP=/usr                \
    INSTALL_DATA="cp -d"            \
    INSTALL_MAN=/usr/share/man/man1 \
    TO_LIB="liblua.so liblua.so.5.4 liblua.so.$version" \
    install 
    mkdir -pv                      /usr/share/doc/lua-$version 
    cp -v doc/*.{html,css,gif,png} /usr/share/doc/lua-$version 
    install -v -m644 -D lua.pc /usr/lib/pkgconfig/lua.pc
}
