# description   : The giflib package contains libraries for reading and writing GIFs as well as programs for converting and working with GIF files
# depends       : 

name=giflib
version=5.2.2    
release=1
source="https://sourceforge.net/projects/giflib/files/giflib-$version.tar.gz
https://www.linuxfromscratch.org/patches/blfs/svn/giflib-$version-upstream_fixes-1.patch
https://www.linuxfromscratch.org/patches/blfs/svn/giflib-$version-security_fixes-1.patch"

options="!checksum"

build() {
    cd $name-$version
    
    patch -Np1 -i ../giflib-$version-upstream_fixes-1.patch
    patch -Np1 -i ../giflib-$version-security_fixes-1.patch
    cp pic/gifgrid.gif doc/giflib-logo.gif
    make
    make DESTDIR=$PKG PREFIX=/usr install 
    rm -fv /usr/lib/libgif.a 
    find doc \( -name Makefile\* -o -name \*.1 \
    -o -name \*.xml \) -exec rm -v {} \; 
    install -v -dm755 /usr/share/doc/giflib-$version 
    cp -v -R doc/* /usr/share/doc/giflib-$version
}
