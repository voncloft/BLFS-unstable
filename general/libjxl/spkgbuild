# description   : The libjxl package contains the reference implementation of the JPEG XL image format
# depends       : brotli cmake giflib highway little cms libjpegturbo libpng gdkpixbuf

name=libjxl
version=0.11.1    
release=1
source="https://github.com/libjxl/libjxl/archive/v$version/libjxl-$version.tar.gz"

options="!checksum"

build() {
    cd $name-$version
    
    mkdir build 
    cd    build 
    cmake -D CMAKE_INSTALL_PREFIX=/usr             \
    -D CMAKE_BUILD_TYPE=Release              \
    -D BUILD_TESTING=OFF                     \
    -D BUILD_SHARED_LIBS=ON                  \
    -D JPEGXL_ENABLE_SKCMS=OFF               \
    -D JPEGXL_ENABLE_SJPEG=OFF               \
    -D JPEGXL_ENABLE_PLUGINS=ON              \
    -D JPEGXL_INSTALL_JARDIR=/usr/share/java \
    -G Ninja ..                              
    ninja
    DESTDIR=$PKG ninja install 
    gdk-pixbuf-query-loaders --update-cache
}
