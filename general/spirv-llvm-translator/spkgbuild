# description   : The SPIRV-LLVM-Translator package contains a library and utility for converting between LLVM IR and SPIR-V code
# depends       : libxml2 llvm spirvtools

name=spirv-llvm-translator
version=20.1.5    
release=1
source="https://github.com/KhronosGroup/SPIRV-LLVM-Translator/archive/v$version/SPIRV-LLVM-Translator-$version.tar.gz"

options="!checksum"

build() {
    cd $name-$version
    
    mkdir build 
    cd    build 
    cmake -D CMAKE_INSTALL_PREFIX=/usr                   \
    -D CMAKE_BUILD_TYPE=Release                    \
    -D BUILD_SHARED_LIBS=ON                        \
    -D CMAKE_SKIP_INSTALL_RPATH=ON                 \
    -D LLVM_EXTERNAL_SPIRV_HEADERS_SOURCE_DIR=/usr \
    -G Ninja ..                                    
    ninja
    DESTDIR=$PKG ninja install
}
