# description   : The FontForge package contains an outline font editor that lets you create your own postscript, truetype, opentype, cid-keyed, multi-master, cff, svg and bitmap (bdf, FON, NFNT) fonts, or edit existing ones
# depends       : libspiro libxml2 gtk

name=fontforge
version=20230101    
release=1
source="https://github.com/fontforge/fontforge/releases/download/$version/fontforge-$version.tar.xz
https://www.linuxfromscratch.org/patches/blfs/svn/fontforge-$version-security_fixes-1.patch"

options="!checksum"

build() {
    cd $name-$version
    
    patch -Np1 -i ../fontforge-$version-security_fixes-1.patch
    sed -i.orig 's/\(%[^%[:space:]]*\)hs/\1s/g' \
    fontforgeexe/searchview.c po/de.po po/ca.po \
    po/hr.po po/it.po po/pl.po po/uk.po po/en_GB.po \
    po/fr.po po/vi.po po/ko.po po/ja.po
    mkdir build 
    cd    build 
    cmake -D CMAKE_INSTALL_PREFIX=/usr \
    -D CMAKE_BUILD_TYPE=Release  \
    -W no-dev .. 
    make
    make DESTDIR=$PKG install
    ln -sv fontforge /usr/share/doc/fontforge-$version
}
