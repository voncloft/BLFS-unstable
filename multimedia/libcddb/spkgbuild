# description   : The libcddb is a library that implements the different protocols (CDDBP, HTTP, SMTP) to access data on a CDDB server
# depends       : 

name=libcddb
version=1.3.2    
release=1
source="https://downloads.sourceforge.net/libcddb/libcddb-$version.tar.bz2"

options="!checksum"

build() {
    cd $name-$version
    
    sed -e '/DEFAULT_SERVER/s/freedb.org/gnudb.gnudb.org/' \
    -e '/DEFAULT_PORT/s/888/0/'                       \
    -i include/cddb/cddb_ni.h                          
    sed '/^Genre:/s/Trip-Hop/Electronic/' -i tests/testdata/920ef00b.txt 
    sed '/DISCID/i# Revision: 42'         -i tests/testcache/misc/12340000
    sed -i 's/size_t l;/socklen_t l;/' lib/cddb_net.c
    ./configure --prefix=/usr --disable-static 
    make
    make DESTDIR=$PKG install
}
