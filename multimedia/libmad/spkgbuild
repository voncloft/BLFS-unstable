# description   : libmad is a high-quality MPEG audio decoder capable of 24-bit output
# depends       : 

name=libmad
version=0.15.1b    
release=1
source="https://downloads.sourceforge.net/mad/libmad-$version.tar.gz
https://www.linuxfromscratch.org/patches/blfs/svn/libmad-$version-fixes-1.patch"

options="!checksum"

build() {
    cd $name-$version
    
    patch -Np1 -i ../libmad-$version-fixes-1.patch                
    sed "s@AM_CONFIG_HEADER@AC_CONFIG_HEADERS@g" -i configure.ac 
    touch NEWS AUTHORS ChangeLog                                 
    autoreconf -fi                                               
    ./configure --prefix=/usr --disable-static 
    make
    make DESTDIR=$PKG install
cat > $PKG/usr/lib/pkgconfig/mad.pc << "EOF"
    prefix=/usr
    exec_prefix=${prefix}
    libdir=${exec_prefix}/lib
    includedir=${prefix}/include
    Name: mad
    Description: MPEG audio decoder
    Requires:
    Version: $version
    Libs: -L${libdir} -lmad
    Cflags: -I${includedir}
EOF
}
