# description   : The Gdk Pixbuf package is a toolkit for image loading and pixel buffer manipulation
# depends       : glib libjpegturbo libpng sharedmimeinfo docutils librsvg libtiff

name=gdk-pixbuf
version=2.42.12    
release=1
source="https://download.gnome.org/sources/gdk-pixbuf/2.42/gdk-pixbuf-$version.tar.xz"

options="!checksum"

build() {
    cd $name-$version
    
    mkdir build 
    cd    build 
    meson setup ..            \
    --prefix=/usr       \
    --buildtype=release \
    -D others=enabled   \
    --wrap-mode=nofallback 
    ninja
    sed "/docs_dir =/s@\$@ / 'gdk-pixbuf-$version'@" -i ../docs/meson.build 
    meson configure -D gtk_doc=true                                        
    ninja
    DESTDIR=$PKG ninja install
    gdk-pixbuf-query-loaders --update-cache
}
