# description   : The ssh-askpass is a generic executable name for many packages, with similar names, that provide a interactive X service to grab password for packages requiring administrative privileges to be run
# depends       : gtk sudop2 xorglibraries agraphical environment

name=ssh-askpass
version=10.0p1    
release=1
source="https://ftp.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-$version.tar.gz"

options="!checksum"

build() {
    cd $name-$version
    
    cd contrib 
    make DESTDIR=$PKG gnome-ssh-askpass3
    install -v -d -m755                    /usr/libexec/openssh/contrib  
    install -v -m755    gnome-ssh-askpass3 /usr/libexec/openssh/contrib  
    ln -sv -f contrib/gnome-ssh-askpass3   /usr/libexec/openssh/ssh-askpass
cat >> /etc/sudo.conf << "EOF" 
    # Path to askpass helper program
    Path askpass /usr/libexec/openssh/ssh-askpass
EOF
    chmod -v 0644 /etc/sudo.conf
}
