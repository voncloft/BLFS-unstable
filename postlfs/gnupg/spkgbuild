# description   : The GnuPG package is GNU's tool for secure communication and data storage
# depends       : libassuan libgcrypt libksba npth openldap gnutls pinentry

name=gnupg
version=2.4.8    
release=1
source="https://www.gnupg.org/ftp/gcrypt/gnupg/gnupg-$version.tar.bz2"

options="!checksum"

build() {
    cd $name-$version
    
    mkdir build 
    cd    build 
    ../configure --prefix=/usr        \
    --localstatedir=/var \
    --sysconfdir=/etc    \
    --docdir=/usr/share/doc/gnupg-$version 
    make DESTDIR=$PKG 
    makeinfo --html --no-split -I doc -o doc/gnupg_nochunks.html ../doc/gnupg.texi 
    makeinfo --plaintext       -I doc -o doc/gnupg.txt           ../doc/gnupg.texi 
    make DESTDIR=$PKG -C doc html
    make DESTDIR=$PKG -C doc pdf
    make DESTDIR=$PKG install 
    install -v -m755 -d /usr/share/doc/gnupg-$version/html            
    install -v -m644    doc/gnupg_nochunks.html \
    /usr/share/doc/gnupg-$version/html/gnupg.html 
    install -v -m644    ../doc/*.texi doc/gnupg.txt \
    /usr/share/doc/gnupg-$version 
    install -v -m644    doc/gnupg.html/* \
    /usr/share/doc/gnupg-$version/html
    install -v -m644 doc/gnupg.pdf \
    /usr/share/doc/gnupg-$version
}
